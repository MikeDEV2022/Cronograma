<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronograma de Estudos</title>
    <link rel="stylesheet" href="styles.css/style.css">
    <link rel="shortcut icon" href="styles.css/favicon.ico" type="image/x-icon">
</head>

<body>
    <header>
        <h1>Cronograma de Estudos</h1>
        <nav>
            <a href="#" id="home-link">Home</a>
            <a href="#" id="calendar-link">Calendário</a>
            <a href="#" id="data"></a>
            <a href="#" id="settings-link">Configurações</a>
        </nav>
    </header>

    <main id="main-content">
        <!-- Home Section -->
        <section id="home-section" class="active">
            <h2>Home</h2>
            <p id="home-message">Nenhuma pendência ou punição em atividade</p>

            <!-- Study Schedule included in the Home section -->
            <div class="schedule">
                <h3>Cronograma de Estudos</h3>
                <ul>
                    <li id="12"><strong>12 de Agosto:</strong> 06:00 - 08:00: JavaScript - Introdução e instalação | 13:00 - 14:00: Banco de Dados - Conceitos básicos</li>
                    <li id="13"><strong>13 de Agosto:</strong> 06:00 - 08:00: JavaScript - Sintaxe básica | 13:00 - 14:00: Eletrônica - Noções básicas</li>
                    <li id="14"><strong>14 de Agosto:</strong> 06:00 - 08:00: JavaScript - Variáveis e tipos de dados | 13:00 - 14:00: Banco de Dados - SQL</li>
                    <li id="15"><strong>15 de Agosto:</strong> 06:00 - 08:00: JavaScript - Funções | 13:00 - 14:00: Eletrônica - Componentes eletrônicos</li>
                    <li id="16"><strong>16 de Agosto:</strong> 06:00 - 08:00: JavaScript - Estruturas de controle | 13:00 - 14:00: Banco de Dados - Tabelas e colunas</li>
                    <li id="17"><strong>17 de Agosto:</strong> 06:00 - 08:00: JavaScript - Objetos e arrays | 13:00 - 14:00: Eletrônica - Montagem de circuitos</li>
                    <li id="18"><strong>18 de Agosto:</strong> 06:00 - 08:00: JavaScript - Manipulação de DOM | 13:00 - 14:00: Banco de Dados - Chaves e índices</li>
                    <li id="19"><strong>19 de Agosto:</strong> 06:00 - 08:00: JavaScript - Eventos | 13:00 - 14:00: Eletrônica - Circuitos simples</li>
                    <li id="20"><strong>20 de Agosto:</strong> 06:00 - 08:00: JavaScript - Funções assíncronas e Promises | 13:00 - 14:00: Banco de Dados - Consultas básicas em SQL</li>
                    <li id="21"><strong>21 de Agosto:</strong> 06:00 - 08:00: JavaScript - Manipulação de APIs | 13:00 - 14:00: Eletrônica - Sensores e atuadores</li>
                    <li id="22"><strong>22 de Agosto:</strong> 06:00 - 08:00: JavaScript - Classes e herança | 13:00 - 14:00: Banco de Dados - Joins e relacionamentos entre tabelas</li>
                    <li id="23"><strong>23 de Agosto:</strong> 06:00 - 08:00: JavaScript - Módulos e importação/exportação | 13:00 - 14:00: Eletrônica - Projetos simples</li>
                    <li id="24"><strong>24 de Agosto:</strong> 06:00 - 08:00: JavaScript - Manipulação de arquivos | 13:00 - 14:00: Banco de Dados - Funções e stored procedures</li>
                    <li id="25"><strong>25 de Agosto:</strong> 06:00 - 08:00: JavaScript - Tratamento de erros e exceções | 13:00 - 14:00: Eletrônica - Circuitos avançados</li>
                    <li id="26"><strong>26 de Agosto:</strong> 06:00 - 08:00: JavaScript - Manipulação de Cookies e Storage | 13:00 - 14:00: Banco de Dados - Otimização de consultas</li>
                    <li id="27"><strong>27 de Agosto:</strong> 06:00 - 08:00: JavaScript - Integração com bibliotecas | 13:00 - 14:00: Eletrônica - Automação básica</li>
                    <li id="28"><strong>28 de Agosto:</strong> 06:00 - 08:00: JavaScript - Aplicações SPA com frameworks | 13:00 - 14:00: Banco de Dados - Backup e recuperação</li>
                    <li id="29"><strong>29 de Agosto:</strong> 06:00 - 08:00: JavaScript - Boas práticas e padrões | 13:00 - 14:00: Eletrônica - Projetos intermediários</li>
                    <li id="30"><strong>30 de Agosto:</strong> 06:00 - 08:00: JavaScript - Performance e otimização | 13:00 - 14:00: Banco de Dados - Segurança e autenticação</li>
                    <li id="31"><strong>31 de Agosto:</strong> 06:00 - 08:00: JavaScript - Revisão geral e práticas recomendadas | 13:00 - 14:00: Eletrônica - Projetos finais</li>
                </ul>
            </div>
        </section>

        <!-- Calendar Section -->
        <section id="calendar-section">
            <h2>Calendário</h2>
            <div class="calendar" id="calendar"></div>
            <div class="feedback" id="feedback"></div>
        </section>

        <!-- Settings Section -->
        <section id="settings-section">
            <h2>Configurações</h2>
            <form id="settings-form">
                <label for="daily-goal">Meta diária de estudo (horas):</label>
                <input type="number" id="daily-goal" name="daily-goal" min="1" max="24">
                <button type="button" id="save-settings">Salvar</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Cronograma de Estudos</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const dataAtual = new Date();
            const options = { timeZone: 'America/Sao_Paulo' };
            const dataHoraBrasil = dataAtual.toLocaleString('pt-BR', options);
            const hora_final = dataHoraBrasil.replace(",", ":");
            const data_side = document.getElementById("data");
            data_side.innerHTML = `${hora_final}`;
    
            const calendar = document.getElementById('calendar');
            const feedback = document.getElementById('feedback');
            const homeMessage = document.getElementById('home-message');
    
            const currentMonth = dataAtual.getMonth();
            const currentYear = dataAtual.getFullYear();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
    
            const scheduleDays = {
                12: document.getElementById('12'),
                13: document.getElementById('13'),
                14: document.getElementById('14'),
                15: document.getElementById('15'),
                16: document.getElementById('16'),
                17: document.getElementById('17'),
                18: document.getElementById('18'),
                19: document.getElementById('19'),
                20: document.getElementById('20'),
                21: document.getElementById('21'),
                22: document.getElementById('22'),
                23: document.getElementById('23'),
                24: document.getElementById('24'),
                25: document.getElementById('25'),
                26: document.getElementById('26'),
                27: document.getElementById('27'),
                28: document.getElementById('28'),
                29: document.getElementById('29'),
                30: document.getElementById('30'),
                31: document.getElementById('31'),
            };
    
            // Verifica se o mês mudou e reseta o status
            const savedMonth = localStorage.getItem('savedMonth');
            if (savedMonth !== String(currentMonth)) {
                localStorage.removeItem('daysStatus');
                localStorage.setItem('savedMonth', String(currentMonth));
            }
    
            const savedDaysStatus = JSON.parse(localStorage.getItem('daysStatus')) || {};
    
            Object.keys(scheduleDays).forEach(day => {
                if (savedDaysStatus[day] === 'productive') {
                    scheduleDays[day].style.backgroundColor = 'green';
                } else if (savedDaysStatus[day] === 'unproductive') {
                    scheduleDays[day].style.backgroundColor = 'red';
                }
            });
    
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'day';
                dayDiv.textContent = day;
    
                if (savedDaysStatus[day] === 'productive') {
                    dayDiv.classList.add('productive');
                } else if (savedDaysStatus[day] === 'unproductive') {
                    dayDiv.classList.add('unproductive');
                }
    
                dayDiv.addEventListener('click', () => {
                    if (!dayDiv.classList.contains('productive') && !dayDiv.classList.contains('unproductive')) {
                        if (confirm('Você quer marcar o dia como produtivo?')) {
                            dayDiv.classList.add('productive');
                            savedDaysStatus[day] = 'productive';
                            if (scheduleDays[day]) {
                                scheduleDays[day].style.backgroundColor = 'green';
                            }
                        } else {
                            dayDiv.classList.add('unproductive');
                            savedDaysStatus[day] = 'unproductive';
                            feedback.textContent = 'Seu dia foi improdutivo, para evitar crises de ansiedade e depressão, não faça atividades de prazer próprio.';
                            if (scheduleDays[day]) {
                                scheduleDays[day].style.backgroundColor = 'red';
                            }
                        }
                        localStorage.setItem('daysStatus', JSON.stringify(savedDaysStatus));
                        updateHomeMessage();
                    }
                });
                calendar.appendChild(dayDiv);
            }
    
            function updateHomeMessage() {
                const unproductiveDays = document.querySelectorAll('.unproductive').length;
                if (unproductiveDays > 0) {
                    homeMessage.textContent = 'Você tem pendências a resolver devido a dias improdutivos.';
                } else {
                    homeMessage.textContent = 'Nenhuma pendência ou punição em atividade';
                }
            }
    
            document.getElementById('home-link').addEventListener('click', function () {
                setActiveSection('home-section');
            });
    
            document.getElementById('calendar-link').addEventListener('click', function () {
                setActiveSection('calendar-section');
            });
    
            document.getElementById('settings-link').addEventListener('click', function () {
                setActiveSection('settings-section');
            });
    
            document.getElementById('save-settings').addEventListener('click', function () {
                const dailyGoal = document.getElementById('daily-goal').value;
                alert('Meta diária de estudo salva: ' + dailyGoal + ' horas');
            });
    
            function setActiveSection(sectionId) {
                document.querySelectorAll('main section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(sectionId).classList.add('active');
            }
    
            setActiveSection('home-section');
            updateHomeMessage();
    
            const currentDate = dataAtual.getDate();
            Object.keys(scheduleDays).forEach(day => {
                if (parseInt(day) < currentDate && !savedDaysStatus[day]) {
                    savedDaysStatus[day] = 'unproductive';
                    scheduleDays[day].style.backgroundColor = 'red';
                    localStorage.setItem('daysStatus', JSON.stringify(savedDaysStatus));
                }
            });
        });
    </script>
    
</body>

</html>
